<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>Family Money｜家計かんたん診断</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #f8f5f0;
      --card: #ffffff;
      --accent: #c89f6c;
      --accent-soft: #f3e3cf;
      --text-main: #333333;
      --text-sub: #666666;
      --danger: #d46a6a;
      --safe: #4d9b6b;
      --border: #e0d6c7;
      --radius-lg: 18px;
      --radius-sm: 10px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 16px;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
        "ヒラギノ角ゴ ProN", "Hiragino Kaku Gothic ProN", "Yu Gothic",
        "游ゴシック", "Noto Sans JP", sans-serif;
      background: var(--bg);
      color: var(--text-main);
    }

    .app {
      max-width: 960px;
      margin: 0 auto;
    }

    .hero {
      margin-bottom: 16px;
    }

    .hero-title {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 4px;
    }

    .hero-sub {
      font-size: 0.95rem;
      color: var(--text-sub);
      line-height: 1.6;
    }

    .cards {
      display: grid;
      grid-template-columns: minmax(0, 1.4fr) minmax(0, 1fr);
      gap: 16px;
    }

    @media (max-width: 768px) {
      .cards {
        grid-template-columns: minmax(0, 1fr);
      }
    }

    .card {
      background: var(--card);
      border-radius: var(--radius-lg);
      padding: 16px 18px 18px;
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.04);
      border: 1px solid var(--border);
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .badge {
      font-size: 0.72rem;
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
    }

    .section-help {
      font-size: 0.8rem;
      color: var(--text-sub);
      margin-bottom: 10px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 10px;
    }

    .field {
      margin-bottom: 10px;
    }

    .field label {
      display: block;
      font-size: 0.8rem;
      margin-bottom: 4px;
      color: var(--text-sub);
    }

    .field input {
      width: 100%;
      padding: 7px 8px;
      font-size: 0.9rem;
      border-radius: var(--radius-sm);
      border: 1px solid var(--border);
      background: #fcfbf8;
    }

    .field input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(200, 159, 108, 0.18);
      background: #ffffff;
    }

    .input-suffix {
      font-size: 0.8rem;
      color: var(--text-sub);
      margin-left: 2px;
    }

    .btn-row {
      margin-top: 10px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    button {
      border: none;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 0.9rem;
      font-weight: 600;
      cursor: pointer;
      background: var(--accent);
      color: #ffffff;
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    button span.icon {
      font-size: 1.1rem;
    }

    button.secondary {
      background: transparent;
      color: var(--text-sub);
      border: 1px solid var(--border);
      font-weight: 500;
    }

    .hint {
      font-size: 0.75rem;
      color: var(--text-sub);
    }

    .result-header {
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      margin-bottom: 8px;
      gap: 8px;
    }

    .result-tagline {
      font-size: 0.85rem;
      color: var(--text-sub);
    }

    .pill {
      padding: 4px 10px;
      border-radius: 999px;
      font-size: 0.78rem;
      font-weight: 600;
      border: 1px solid var(--border);
      background: #fcfbf8;
    }

    .pill-safe {
      border-color: var(--safe);
      color: var(--safe);
      background: #f1f7f3;
    }

    .pill-caution {
      border-color: #e2a23c;
      color: #e2a23c;
      background: #fff6e6;
    }

    .pill-danger {
      border-color: var(--danger);
      color: var(--danger);
      background: #ffecec;
    }

    .result-grid {
      display: grid;
      grid-template-columns: minmax(0, 1fr) minmax(0, 1fr);
      gap: 6px;
      margin-bottom: 10px;
    }

    .metric {
      border-radius: var(--radius-sm);
      padding: 8px 9px;
      background: #fcfbf8;
      border: 1px solid var(--border);
      font-size: 0.8rem;
    }

    .metric-label {
      color: var(--text-sub);
      margin-bottom: 2px;
    }

    .metric-value {
      font-weight: 600;
      font-size: 0.9rem;
    }

    .metric-note {
      font-size: 0.7rem;
      color: var(--text-sub);
    }

    .result-message {
      font-size: 0.85rem;
      line-height: 1.7;
      margin-bottom: 8px;
    }

    .result-next {
      font-size: 0.8rem;
      color: var(--text-sub);
    }

    .footer-note {
      margin-top: 12px;
      font-size: 0.72rem;
      color: var(--text-sub);
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="hero">
      <div class="hero-title">Family Money｜家計かんたん診断</div>
      <p class="hero-sub">
        40代・晩産夫婦向けのミニ診断です。<br />
        今の家計バランスをざっくり見える化して、「安心して使えるお金」を考えるきっかけにしてください。
      </p>
    </header>

    <main class="cards">
      <!-- 入力エリア -->
      <section class="card">
        <div class="card-title">
          毎月の数字を入れてみる
          <span class="badge">1〜2分でOK</span>
        </div>
        <p class="section-help">
          手取りやざっくりした金額で大丈夫です。思い出せる範囲で、気楽に入れてみてください。
        </p>

        <form id="kakei-form">
          <div class="field">
            <label>① 世帯の毎月の手取り収入
              <span class="input-suffix">（ボーナスはならしてOK）</span>
            </label>
            <input type="number" id="income" min="0" placeholder="例）480000" />
          </div>

          <div class="grid-2">
            <div class="field">
              <label>② 住居費（家賃・住宅ローン）<span class="input-suffix">／月</span></label>
              <input type="number" id="housing" min="0" placeholder="例）120000" />
            </div>
            <div class="field">
              <label>③ 光熱費・通信費など固定費<span class="input-suffix">／月</span></label>
              <input type="number" id="utilities" min="0" placeholder="例）40000" />
            </div>
          </div>

          <div class="grid-2">
            <div class="field">
              <label>④ 保険料の合計<span class="input-suffix">／月</span></label>
              <input type="number" id="insurance" min="0" placeholder="例）30000" />
            </div>
            <div class="field">
              <label>⑤ 保育料・教育費（現時点）<span class="input-suffix">／月</span></label>
              <input type="number" id="education" min="0" placeholder="例）30000" />
            </div>
          </div>

          <div class="field">
            <label>⑥ 食費・日用品など（家族の生活費）<span class="input-suffix">／月</span></label>
            <input type="number" id="living" min="0" placeholder="例）90000" />
          </div>

          <div class="field">
            <label>⑦ レジャー・外食・カフェなどの自由費<span class="input-suffix">／月</span></label>
            <input type="number" id="play" min="0" placeholder="例）30000" />
          </div>

          <div class="field">
            <label>⑧ 毎月の貯金・つみたて額<span class="input-suffix">／月</span></label>
            <input type="number" id="savings" min="0" placeholder="例）50000" />
          </div>

          <div class="btn-row">
            <button type="submit">
              <span class="icon">▶</span> 家計を診断する
            </button>
            <button type="button" class="secondary" id="reset-btn">
              リセット
            </button>
          </div>
          <p class="hint">
            ※ 正確な家計簿でなくてOK。「だいたい」で入れても、今のバランスの目安が分かります。
          </p>
        </form>
      </section>

      <!-- 結果エリア -->
      <section class="card">
        <div class="card-title">
          診断結果
          <span class="badge">Family Money視点</span>
        </div>
        <div id="result-area">
          <p class="section-help">
            数字を入力して「家計を診断する」を押すと、ここに結果が表示されます。
          </p>
          <p class="section-help">
            貯蓄率・固定費の割合・安心度タイプを、40代・晩産家庭の目線でやさしく見える化します。
          </p>
        </div>
        <p class="footer-note">
          ※ これはあくまで簡易診断です。正確なライフプランは、ご家庭の状況に合わせた個別設計が必要です。
        </p>
      </section>
    </main>
  </div>

  <script>
    function formatPercent(value) {
      if (isNaN(value)) return "-";
      return (value * 100).toFixed(1) + "%";
    }

    function formatYen(value) {
      if (isNaN(value)) return "-";
      return Math.round(value).toLocaleString("ja-JP") + " 円";
    }

    function getSafetyPillClass(score) {
      if (score === "A") return "pill pill-safe";
      if (score === "B") return "pill pill-caution";
      return "pill pill-danger";
    }

    function buildResultHTML(data) {
      const {
        income,
        fixedCost,
        variableCost,
        savings,
        fixedRatio,
        savingsRatio,
        playRatio,
        typeRank,
        message,
        nextStep,
      } = data;

      return `
        <div class="result-header">
          <div>
            <div class="result-tagline">いまの家計バランスのイメージ</div>
          </div>
          <div class="${getSafetyPillClass(typeRank)}">
            安心度タイプ：${typeRank}
          </div>
        </div>

        <div class="result-grid">
          <div class="metric">
            <div class="metric-label">毎月の手取り（目安）</div>
            <div class="metric-value">${formatYen(income)}</div>
            <div class="metric-note">ご入力いただいた金額ベース</div>
          </div>
          <div class="metric">
            <div class="metric-label">貯蓄率（つみたて＋貯金）</div>
            <div class="metric-value">${formatPercent(savingsRatio)}</div>
            <div class="metric-note">目安：15〜20％を目標にできると安心</div>
          </div>
          <div class="metric">
            <div class="metric-label">固定費の割合（住居＋固定費＋保険＋教育）</div>
            <div class="metric-value">${formatPercent(fixedRatio)}</div>
            <div class="metric-note">目安：50〜60％以内だとゆとりが生まれやすい</div>
          </div>
          <div class="metric">
            <div class="metric-label">自由費（レジャー等）の比率</div>
            <div class="metric-value">${formatPercent(playRatio)}</div>
            <div class="metric-note">「楽しみ」が確保できているかの目安</div>
          </div>
        </div>

        <div class="result-message">
          ${message}
        </div>
        <div class="result-next">
          ${nextStep}
        </div>
      `;
    }

    function diagnose() {
      const income = Number(document.getElementById("income").value) || 0;
      const housing = Number(document.getElementById("housing").value) || 0;
      const utilities = Number(document.getElementById("utilities").value) || 0;
      const insurance = Number(document.getElementById("insurance").value) || 0;
      const education = Number(document.getElementById("education").value) || 0;
      const living = Number(document.getElementById("living").value) || 0;
      const play = Number(document.getElementById("play").value) || 0;
      const savings = Number(document.getElementById("savings").value) || 0;

      const resultArea = document.getElementById("result-area");

      if (!income || income <= 0) {
        resultArea.innerHTML =
          '<p class="section-help">まずは「世帯の毎月の手取り収入」を入力してください。</p>';
        return;
      }

      const fixedCost = housing + utilities + insurance + education;
      const variableCost = living + play;

      const fixedRatio = fixedCost / income;
      const savingsRatio = savings / income;
      const playRatio = play / income;

      // 安心度タイプのざっくり判定（40代・晩産家庭イメージ）
      let typeRank = "B";
      let message = "";
      let nextStep = "";

      if (savingsRatio >= 0.18 && fixedRatio <= 0.6) {
        typeRank = "A";
        message =
          "今のところ、家計の土台はしっかりしている印象です。貯蓄も固定費もバランスよく整えられていて、「安心して使えるお金」も確保しやすい状態と言えます。";
        nextStep =
          "次のステップは、「本当に価値ある支出」にお金を回していくこと。ご家族にとって大切な体験や時間に、安心して使える枠を少しずつ増やしていきましょう。";
      } else if (savingsRatio >= 0.1 && fixedRatio <= 0.7) {
        typeRank = "B";
        message =
          "貯蓄もできていて、大きく崩れているわけではない家計バランスです。ただ、今後の教育費や老後を考えると「もう一歩、土台を整えておきたい」状態とも言えます。";
        nextStep =
          "住居費・保険・通信費などの固定費を少しだけ見直せると、貯蓄率15〜20％に近づきやすくなります。いきなり節約するのではなく、「何を優先したいか」を夫婦で話すところから始めてみましょう。";
      } else {
        typeRank = "C";
        message =
          "今は「なんとなく回っているけれど、将来を考えると少し不安」という状態かもしれません。貯蓄率が低め、もしくは固定費が高めになっているサインがあります。";
        nextStep =
          "まずは毎月の固定費（住居・保険・通信など）と貯蓄額のバランスを確認してみましょう。「どこを減らすか」ではなく、「どこにいくら残しておきたいか」を決めることで、家計の再出発がしやすくなります。";
      }

      const data = {
        income,
        fixedCost,
        variableCost,
        savings,
        fixedRatio,
        savingsRatio,
        playRatio,
        typeRank,
        message,
        nextStep,
      };

      resultArea.innerHTML = buildResultHTML(data);
    }

    document
      .getElementById("kakei-form")
      .addEventListener("submit", function (e) {
        e.preventDefault();
        diagnose();
      });

    document.getElementById("reset-btn").addEventListener("click", () => {
      document.getElementById("kakei-form").reset();
      document.getElementById("result-area").innerHTML = `
        <p class="section-help">
          数字を入力して「家計を診断する」を押すと、ここに結果が表示されます。
        </p>
        <p class="section-help">
          貯蓄率・固定費の割合・安心度タイプを、40代・晩産家庭の目線でやさしく見える化します。
        </p>
      `;
    });
  </script>
</body>
</html>
